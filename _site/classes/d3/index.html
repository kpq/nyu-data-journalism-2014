<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>More work charting in the browser</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/assets/base.css">
        <link rel="stylesheet" href="/assets/syntax.css">

        <!-- Custom CSS -->
        <!-- <link rel="stylesheet" href="/assets/main.css"> -->

        <script src="/assets/d3.v3.min.js" charset="utf-8"></script>
        <script src="/assets/topojson.v1.min.js" charset="utf-8"></script>
        <script src="/assets/queue.v1.min.js" charset="utf-8"></script>
    </head>
    <body>
        <div class="main">

            <header>
  <a href="/">NYU — Spring 2014</a> / <span>Week 3</span>
</header>

<h1>More work charting in the browser</h1>

<div class="lesson">
  <h2>Housekeeping</h2>

<ul>
<li><a href="../../projects/">Project timeline.</a> Are you on track for success?</li>
<li>Peipei and Ellis are leading a discussion on <a href="">XXX</a></li>
</ul>

<h2>Lab</h2>

<p>Say you&rsquo;re a sports reporter covering the Oakland Athletics and you heard one of your sources talk about a shift in the way the game is played. Your source, a batting coach, says he tells his hitters to swing aggressively no matter the pitch count – in the past, he had told them to be more defensive when they had two strikes, opting to put the ball in play rather than strike out. As a result, your source says, players are striking out much more than they used to: last year, the team struck out more than than any time in franchise history.</p>

<p>As a journalist who&rsquo;s literate with data, what might be a logical way to assess the veracity of this claim and provide insight on this trend to your readers? Where might you get data to prove or disprove this claim?</p>

<h3>D3</h3>

<p>Hopefully you already have a <code>line-chart</code> repo with a <code>gh-pages</code> branch setup and have create an <code>index.html</code> file that is based on <a href="http://alignedleft.com/tutorials/d3/setup">Scott Murray&rsquo;s d3 starter</a>. If not, do all that now or ask a friend to help.</p>

<ol>
<li><p>First thing&rsquo;s first. Let&rsquo;s create a place for our CSS, a headline for our page and an empty container for our shiny chart. We&rsquo;ll also need a <code>script</code> tag for all our fancy javascript.</p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;style&gt;</span>
  <span class="c">/* Our css will go here */</span>
<span class="nt">&lt;/style&gt;</span>

<span class="nt">&lt;h1&gt;</span>Strikeouts on the Rise<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span>Meaningful intro sentence here.<span class="nt">&lt;/p&gt;</span>
<span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;chart&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>

<span class="nt">&lt;script&gt;</span>
  <span class="c1">// Our javascript code will go here</span>
<span class="nt">&lt;/script&gt;</span>
</code></pre></div></li>
<li><p>You should already have your <code>strikeouts.csv</code> file in your repo, so let&rsquo;s try to load it up.</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">d3</span><span class="p">.</span><span class="nx">csv</span><span class="p">(</span><span class="s2">&quot;strikeouts.csv&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></li>
<li><p>Now, some of our number fields are coming through as strings, so let&rsquo;s fix that. Your javascript should look like this. Now the number fields should look like numbers in the console.</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">d3</span><span class="p">.</span><span class="nx">csv</span><span class="p">(</span><span class="s2">&quot;strikeouts.csv&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span>
    <span class="nx">data</span><span class="p">.</span><span class="nx">forEach</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span>
        <span class="nx">d</span><span class="p">.</span><span class="nx">so</span> <span class="o">=</span> <span class="o">+</span><span class="nx">d</span><span class="p">.</span><span class="nx">so</span><span class="p">;</span>
        <span class="nx">d</span><span class="p">.</span><span class="nx">year</span> <span class="o">=</span> <span class="o">+</span><span class="nx">d</span><span class="p">.</span><span class="nx">year</span><span class="p">;</span>
        <span class="nx">d</span><span class="p">.</span><span class="nx">g</span> <span class="o">=</span> <span class="o">+</span><span class="nx">d</span><span class="p">.</span><span class="nx">g</span><span class="p">;</span>
        <span class="c1">//We also want to calculate the strikeouts per game and store it as a new column</span>
        <span class="nx">d</span><span class="p">.</span><span class="nx">kpg</span> <span class="o">=</span> <span class="nx">d</span><span class="p">.</span><span class="nx">so</span> <span class="o">/</span> <span class="nx">d</span><span class="p">.</span><span class="nx">g</span><span class="p">;</span>
    <span class="p">});</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></li>
<li><p>We&rsquo;ll start by making a scatterplot, for which we&rsquo;ll need two scales. First we need svg element to put our chart into.</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">svg</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;.chart&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="mi">900</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="mi">500</span><span class="p">);</span>
</code></pre></div></li>
<li><p>Now we&rsquo;ll need an <code>xScale</code>&hellip;</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">xScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">linear</span><span class="p">()</span>
      <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="mi">1900</span><span class="p">,</span> <span class="mi">2012</span><span class="p">])</span>
      <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="nx">width</span><span class="p">]);</span>
</code></pre></div></li>
<li><p>And now the <code>yScale</code>&hellip;</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">yScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">linear</span><span class="p">()</span>
      <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">100</span><span class="p">])</span>
      <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="nx">height</span><span class="p">]);</span>
</code></pre></div></li>
<li><p>And now for the magical data join</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">svg</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;.dot&quot;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">enter</span><span class="p">().</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;dot&quot;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cx&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">xScale</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">year</span><span class="p">);</span> <span class="p">})</span>
      <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">yScale</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">kpg</span><span class="p">);</span> <span class="p">})</span>
</code></pre></div></li>
<li><p>You should see something like this:
<img src="first-scatterplot.png"></p>

<p>Not great, but a start. Let&rsquo;s fix our <code>yScale</code> so our data fits better and so it&rsquo;s pointed the right way.</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript">    <span class="kd">var</span> <span class="nx">yScale</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">scale</span><span class="p">.</span><span class="nx">linear</span><span class="p">()</span>
      <span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">])</span>
      <span class="p">.</span><span class="nx">range</span><span class="p">([</span><span class="nx">height</span><span class="p">,</span> <span class="mi">0</span><span class="p">]);</span>
</code></pre></div>
<p>Here we&rsquo;ve switched the range values and hardcoded a better max for our domain. If you want to get fancy, we can calculate that max value with:</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="p">.</span><span class="nx">domain</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">max</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">kpg</span><span class="p">;</span> <span class="p">})])</span>
</code></pre></div>
<p>but that is optional. Either way, it should look something like this:</p>

<p><img src="better-scatterplot.png"></p>

<p>Try reducing the <code>&quot;r&quot;</code> attribute of your circles to <code>2</code> and see what happens.</p></li>
<li><p>Right now we&rsquo;re showing all teams for all years, so let&rsquo;s now filter our data and just show Oakland. Here&rsquo;s how to show New York Yankees, modify it to show Oakland A&rsquo;s.</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">nyData</span> <span class="o">=</span> <span class="nx">data</span><span class="p">.</span><span class="nx">filter</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">.</span><span class="nx">franchise</span> <span class="o">===</span> <span class="s2">&quot;NYY&quot;</span><span class="p">;</span> <span class="p">});</span>
</code></pre></div>
<p>Here we&rsquo;re creating a new data variable <code>nyData</code> so we also need to make sure our data join is using this variable and not <code>data</code>.</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">svg</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;.dot&quot;</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">data</span><span class="p">(</span><span class="nx">nyData</span><span class="p">)</span>
      <span class="c1">//...</span>
</code></pre></div>
<p>You should now only see the dots for Oakland.</p></li>
<li><p>The title of this lesson is &ldquo;line chart&rdquo; not &ldquo;scatterplot&rdquo; so let&rsquo;s get at least one line in there.</p>

<p>The weird thing about svg is that a complicated line is actually one element &mdash; as opposed to the circles where there is a circle element for each data value. For a line there will be only one element for ALL our data values.</p>

<p>So, first thing we need to do is create something that is called a <code>d3.svg.line()</code> generator.</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">line</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">svg</span><span class="p">.</span><span class="nx">line</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">x</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">xScale</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">year</span><span class="p">);</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">y</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">yScale</span><span class="p">(</span><span class="nx">d</span><span class="p">.</span><span class="nx">kpg</span><span class="p">);</span> <span class="p">});</span>
</code></pre></div>
<p>This creates a function for us that we are saving as <code>line</code> and this function will take a data set and spit out the proper code to make an svg path element. Here&rsquo;s how we use it:</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">svg</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;path&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="nx">line</span><span class="p">(</span><span class="nx">nyData</span><span class="p">));</span>
</code></pre></div>
<p><img src="filled-chart.png"></p>

<p>What this is doing is creating a <code>path</code> svg element and adding the <code>d</code> attribute with all our magic line code. Unfortunately it looks a little funky because it has a fill and no stroke, so let&rsquo;s fix that with CSS.</p></li>
<li><p>Add this CSS style rule to the <code>style</code> area of your page and add a class to the path element
<code>javascript
svg.append(&quot;path&quot;)
  .attr(&quot;class&quot;, &quot;line&quot;)
  .attr(&quot;d&quot;, line(nyData));
</code></p>
<div class="highlight"><pre><code class="html language-html" data-lang="html"><span class="nt">&lt;style&gt;</span>
  <span class="nc">.line</span> <span class="p">{</span>
    <span class="n">fill</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
    <span class="n">stroke</span><span class="o">:</span> <span class="nb">magenta</span><span class="p">;</span>
  <span class="p">}</span>
<span class="nt">&lt;/style&gt;</span>
</code></pre></div></li>
<li><p>We should probably start labeling some stuff now. Let&rsquo;s start with an axis.</p>

<p>Similar to the line generator, we need to now create an axis generator (which won&rsquo;t actually create an axis, only create the function to create an axis. Mind blown.)</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">xAxis</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">svg</span><span class="p">.</span><span class="nx">axis</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="nx">xScale</span><span class="p">);</span>
</code></pre></div>
<p>Now, let&rsquo;s use this generator to generate some svg code.</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">svg</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;g&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;axis&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">xAxis</span><span class="p">);</span>
</code></pre></div>
<p>The axis should show up, but it&rsquo;ll look super janky and be on the top of the page and the numbers are weird and it get&rsquo;s cut off. Let&rsquo;s tackle these one at a time.</p></li>
<li><p>The <a href="http://bl.ocks.org/mbostock/3019563">D3 margin convention</a> is there to help with the cutoff problem. We cut some corners and just appended an svg element at the start instead of setting things up proper, so let&rsquo;s take a step back. Up where we appended our &ldquo;svg&rdquo;, let&rsquo;s replace it with this code:</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">margin</span> <span class="o">=</span> <span class="p">{</span><span class="nx">top</span><span class="o">:</span> <span class="mi">20</span><span class="p">,</span> <span class="nx">right</span><span class="o">:</span> <span class="mi">20</span><span class="p">,</span> <span class="nx">bottom</span><span class="o">:</span> <span class="mi">20</span><span class="p">,</span> <span class="nx">left</span><span class="o">:</span> <span class="mi">20</span><span class="p">};</span>
    <span class="nx">width</span> <span class="o">=</span> <span class="mi">750</span> <span class="o">-</span> <span class="nx">margin</span><span class="p">.</span><span class="nx">left</span> <span class="o">-</span> <span class="nx">margin</span><span class="p">.</span><span class="nx">right</span><span class="p">,</span>
    <span class="nx">height</span> <span class="o">=</span> <span class="mi">500</span> <span class="o">-</span> <span class="nx">margin</span><span class="p">.</span><span class="nx">top</span> <span class="o">-</span> <span class="nx">margin</span><span class="p">.</span><span class="nx">bottom</span><span class="p">;</span>

<span class="kd">var</span> <span class="nx">svg</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;.chart&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;svg&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">,</span> <span class="nx">width</span> <span class="o">+</span> <span class="nx">margin</span><span class="p">.</span><span class="nx">left</span> <span class="o">+</span> <span class="nx">margin</span><span class="p">.</span><span class="nx">right</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">,</span> <span class="nx">height</span> <span class="o">+</span> <span class="nx">margin</span><span class="p">.</span><span class="nx">top</span> <span class="o">+</span> <span class="nx">margin</span><span class="p">.</span><span class="nx">bottom</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;g&quot;</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">,</span> <span class="s2">&quot;translate(&quot;</span> <span class="o">+</span> <span class="nx">margin</span><span class="p">.</span><span class="nx">left</span> <span class="o">+</span> <span class="s2">&quot;,&quot;</span> <span class="o">+</span> <span class="nx">margin</span><span class="p">.</span><span class="nx">top</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">);</span>
</code></pre></div>
<p>You should now be able to see your entire axis text.</p></li>
<li><p>Let&rsquo;s move the axis to the bottom of the page. Right now it&rsquo;s in a <code>g</code> element, which is a group, so we can just move that around. Unfortunately you can&rsquo;t just use x and y. Instead you have to use a &ldquo;transform&rdquo;</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">svg</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;g&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;class&quot;</span><span class="p">,</span> <span class="s2">&quot;axis&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;transform&quot;</span><span class="p">,</span> <span class="s2">&quot;translate(0, &quot;</span> <span class="o">+</span> <span class="nx">height</span> <span class="o">+</span> <span class="s2">&quot;)&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">xAxis</span><span class="p">)</span>
</code></pre></div></li>
<li><p>Next on our list, the labels have weird commas in them, which would be nice if they were numbers, sadly ours are years. D3 is formatting our numbers for us, but we need to override that.</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="kd">var</span> <span class="nx">xAxis</span> <span class="o">=</span> <span class="nx">d3</span><span class="p">.</span><span class="nx">svg</span><span class="p">.</span><span class="nx">axis</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">tickFormat</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">)</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">d</span><span class="p">;</span> <span class="p">})</span>
    <span class="p">.</span><span class="nx">scale</span><span class="p">(</span><span class="nx">xScale</span><span class="p">);</span>
</code></pre></div></li>
<li><p>The rest of our fixes can be made with CSS. Inspect element on the axis component and see what&rsquo;s what. Inside there should be a bunch of <code>g</code> elements with <code>.tick</code> classes and one <code>.domain</code> element. First, let&rsquo;s style the <code>.domain</code> element.</p>
<div class="highlight"><pre><code class="css language-css" data-lang="css"><span class="nc">.domain</span> <span class="p">{</span>
    <span class="n">fill</span><span class="o">:</span> <span class="k">none</span><span class="p">;</span>
    <span class="n">stroke</span><span class="o">:</span> <span class="nb">cyan</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Now, let&rsquo;s make those ticks show up.</p>
<div class="highlight"><pre><code class="css language-css" data-lang="css"><span class="nc">.tick</span> <span class="nt">line</span> <span class="p">{</span>
    <span class="n">stroke</span><span class="o">:</span> <span class="nb">cyan</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>And let&rsquo;s make the text size a little smaller</p>
<div class="highlight"><pre><code class="css language-css" data-lang="css"><span class="nc">.tick</span> <span class="p">{</span>
    <span class="k">font-size</span><span class="o">:</span> <span class="m">10px</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>You should now have something like this:</p>

<p><img src="styled-axis.png"></p></li>
<li><p>Final step, bring some fun. (just copy and paste this into your code)</p>
<div class="highlight"><pre><code class="javascript language-javascript" data-lang="javascript"><span class="nx">d3</span><span class="p">.</span><span class="nx">select</span><span class="p">(</span><span class="s2">&quot;.chart&quot;</span><span class="p">).</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;button&quot;</span><span class="p">).</span><span class="nx">text</span><span class="p">(</span><span class="s2">&quot;Blamo!&quot;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">d3</span><span class="p">.</span><span class="nx">selectAll</span><span class="p">(</span><span class="s2">&quot;circle&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">transition</span><span class="p">()</span>
        <span class="p">.</span><span class="nx">duration</span><span class="p">(</span><span class="mi">2000</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">ease</span><span class="p">(</span><span class="s2">&quot;bounce&quot;</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">delay</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">d</span><span class="p">,</span> <span class="nx">i</span><span class="p">){</span> <span class="k">return</span> <span class="nx">i</span> <span class="o">*</span> <span class="mi">50</span><span class="p">})</span>
        <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;cy&quot;</span><span class="p">,</span> <span class="nx">height</span><span class="p">)</span>
        <span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="mi">7</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></li>
<li><p>Here&rsquo;s a link to a working version: <a href="d3-line-chart.html">d3-line-chart.html</a></p></li>
</ol>

<h2>Homework</h2>

<p>Your assignment is to publish a line chart with this data in D3 of your favorite team. It&rsquo;s due <strong>Tuesday at noon.</strong> It doesn&rsquo;t have to look like <a href="http://www.nytimes.com/interactive/2013/03/29/sports/baseball/Strikeouts-Are-Still-Soaring.html?_r=0">the NYT version</a>, but it might help you figure out some of the code (or not - it is pretty complex):</p>

<p><img src="strikeouts-nyt.png"></p>

<p>As we&rsquo;ve said, grading isn&rsquo;t the most important thing in the world to us, but here are our expectations.</p>

<h4>Requirements</h4>

<ul>
<li><p>It must be published on its own github branch and linked to from your dataviz-home page.</p></li>
<li><p>It must have a line representing the average strikeouts per game of a team of your choosing, along with a title and an X and Y axis.</p></li>
<li><p>It must have at least one meaningful annotation describing any trends or insights. Some are on the NYT version already, we know, so try to annotate the line for your team.</p></li>
</ul>

<h4>For a gold star</h4>

<ul>
<li><p>Try to have a select element or search box that lets you choose from any team in the league (if we don&rsquo;t do this in class) and the line redraws based on your selection.</p></li>
<li><p>Add a line for the league average calculated using d3.nest()</p></li>
<li><p>Add another chart and copy that tells a more specific story, or do more reporting based on data analysis you&rsquo;ve done here.</p></li>
<li><p>Clean up the design of your chart using CSS based on successful line charts you&rsquo;ve seen in the wild. <a href="http://www.nytimes.com/interactive/2011/05/31/business/economy/case-shiller-index.html">There</a> <a href="http://www.nytimes.com/interactive/2012/10/05/business/economy/one-report-diverging-perspectives.html">are</a> <a href="http://www.nytimes.com/interactive/2013/01/15/us/a-migration-of-unmarried-men.html">lots</a> <a href="http://www.nytimes.com/interactive/2012/05/05/sports/baseball/mariano-rivera-and-his-peers.html">of</a> <a href="http://www.nytimes.com/interactive/2012/11/30/us/tax-burden.html">examples</a>.</p></li>
</ul>

</div>


        </div> <!-- /main -->

        <script src="/assets/base.js" charset="utf-8"></script>

    </body>
</html>
